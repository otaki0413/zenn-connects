---
title: "OAuthã¨GitHubãƒ­ã‚°ã‚¤ãƒ³ã®ä»•çµ„ã¿ã‚’ã–ã£ãã‚Šç†è§£ã™ã‚‹"
emoji: "ğŸ›¡ï¸"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["oauth", "openid"]
published: false
---

ã“ã‚Œã¯ã€ŒHappiness Chain Advent Calendar 2024ã€ã® 11 æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚
https://adventar.org/calendars/10341

## ã¯ã˜ã‚ã«

ç¾åœ¨ã€Django ã‚’ä½¿ã£ãŸ Twitter ã‚¯ãƒ­ãƒ¼ãƒ³ã‚¢ãƒ—ãƒªã‚’ä½œæˆã—ã¦ãŠã‚Šã€ãã®ä¸­ã§ GitHub ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹æ©Ÿä¼šãŒã‚ã‚Šã¾ã—ãŸã€‚å®Ÿè£…è‡ªä½“ã¯ã§ããŸã‚‚ã®ã®ã€ã€Œ**OAuth**ã€ ã¨å‘¼ã°ã‚Œã‚‹ä»•çµ„ã¿ãŒä½•ã‚’ã—ã¦ã„ã‚‹ã®ã‹ã‚ˆãã‚ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ãã“ã§æœ¬è¨˜äº‹ã§ã¯ã€OAuth ã®åŸºæœ¬çš„ãªä»•çµ„ã¿ã¨ GitHub ãƒ­ã‚°ã‚¤ãƒ³ãŒã©ã®ã‚ˆã†ã« OAuth ã‚’æ´»ç”¨ã—ã¦ã„ã‚‹ã‹ã‚’ç´¹ä»‹ã—ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚

:::message
ã“ã®è¨˜äº‹ã¯ã€åˆå¿ƒè€…å‘ã‘ã« OAuth ã®æ¦‚è¦ã‚’ã‚ã‹ã‚Šã‚„ã™ãèª¬æ˜ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚
æ­£ç¢ºãªä»•æ§˜ã‚„è©³ç´°ã‚’çŸ¥ã‚ŠãŸã„æ–¹ã¯ã€[ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://datatracker.ietf.org/doc/html/rfc6749)ã‚„å°‚é–€æ›¸ã‚’ã”å‚ç…§ãã ã•ã„ã€‚
:::

## OAuth ã£ã¦ä½•ï¼Ÿ

ã“ã¡ã‚‰ã®è¨˜äº‹ãŒã¨ã¦ã‚‚ã‚ã‹ã‚Šã‚„ã™ã„ã®ã§ã€ã¾ãšã¯ä¸€åº¦èª­ã‚€ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ï¼

https://qiita.com/TakahikoKawasaki/items/e37caf50776e00e733be

**OAuth**ï¼ˆ**Open Authorization**ï¼‰ã¨ã¯ã€**ã‚¢ãƒ—ãƒªã‚„ã‚µãƒ¼ãƒ“ã‚¹ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚„æ©Ÿèƒ½ã«å®‰å…¨ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ä»•æ§˜**ã®ã“ã¨ã§ã™ã€‚

ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå ´é¢ã§åˆ©ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

- Google ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½¿ã£ã¦ã€ä»–ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹
- å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰ X ã® API ã‚’é€šã˜ã¦ã€ç‰¹å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚„ãƒã‚¹ãƒˆã‚’å–å¾—ã™ã‚‹
- Slack ã¨é€£æºã—ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæŒ‡å®šã—ãŸãƒãƒ£ãƒ³ãƒãƒ«ã«å¯¾ã—ã¦é€šçŸ¥ã‚’é€ä¿¡ã™ã‚‹

## OAuth ã¯ã€èªå¯ã€ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã‚ã‚‹

ãŸã ã—ã€OAuth ã¯ã‚ãã¾ã§ã€Œ**èªå¯ï¼ˆAuthorizationï¼‰**ã€ã«ç„¦ç‚¹ã‚’å½“ã¦ãŸãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã™ã€‚
ä¼¼ãŸè¡¨ç¾ã«ã€Œ**èªè¨¼ï¼ˆAuthenticationï¼‰**ã€ãŒã‚ã‚Šã¾ã™ãŒã€ä¸¡è€…ã¯ç•°ãªã‚‹æ¦‚å¿µãªã®ã§æ³¨æ„ã—ã¦ä¸‹ã•ã„ã€‚
OAuth ã‚’ä½¿ã†ä¸Šã§ã¯ã€ã“ã®é•ã„ã‚’ç†è§£ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚

- **èªè¨¼ï¼ˆAuthenticationï¼‰**:ã€Œã‚ãªãŸã¯èª°ã§ã™ã‹ï¼Ÿã€ã‚’ç¢ºèªã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹
- **èªå¯ï¼ˆAuthorizationï¼‰**:ã€Œã“ã®ã‚¢ãƒ—ãƒªãŒã“ã®ãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã®ã‚’è¨±å¯ã—ã¾ã™ã‹ï¼Ÿã€ã‚’ç®¡ç†ã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹

https://zenn.dev/tanaka_takeru/articles/aecd36a805886d

ã‚‚ã—ã€Œ**èªè¨¼**ã€ã‚’å–ã‚Šæ‰±ã†å ´åˆã«ã¯ã€**OpenID Connect** ã¨ã„ã† OAuth ã®æ‹¡å¼µä»•æ§˜ãŒä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
æœ¬è¨˜äº‹ã§ã¯è§¦ã‚Œã¾ã›ã‚“ãŒã€OpenID Connect ã‚’ä½¿ã†ã“ã¨ã§ã€**ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒèª°ã§ã‚ã‚‹ã‹ã®ç¢ºèª** ã‚‚ã§ãã‚‹ãŸã‚ã€OAuth ã¨çµ„ã¿åˆã‚ã›ã¦èªè¨¼ã¨èªå¯ã‚’å®Ÿç¾ã™ã‚‹ã‚±ãƒ¼ã‚¹ã‚‚ã‚ã‚‹ã‚ˆã†ã§ã™ã€‚

https://qiita.com/TakahikoKawasaki/items/498ca08bbfcc341691fe

## OAuth ã®ä»•çµ„ã¿ã«ã¤ã„ã¦

ãã‚Œã§ã¯ OAuth ã®ä»•çµ„ã¿ã‚’å…·ä½“çš„ã«è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

### OAuth ã®æ§‹æˆè¦ç´ 

[OAuth ã¯ä»¥ä¸‹ 4 ã¤ã®è¦ç´ ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚](https://openid-foundation-japan.github.io/rfc6749.ja.html#anchor2)

| è¦ç´                               | èª¬æ˜                                                       |
| --------------------------------- | ---------------------------------------------------------- |
| **ãƒªã‚½ãƒ¼ã‚¹ã‚ªãƒ¼ãƒŠãƒ¼ï¼ˆ=ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰** | ä¿è­·ã•ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼‰ã‚’æ‰€æœ‰ã—ã¦ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ |
| **ãƒªã‚½ãƒ¼ã‚¹ã‚µãƒ¼ãƒãƒ¼**              | ä¿è­·ã•ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹ã‚’æ ¼ç´ã—ã€ãã‚Œã‚’ API ã§æä¾›ã™ã‚‹ã‚µãƒ¼ãƒãƒ¼  |
| **èªå¯ã‚µãƒ¼ãƒãƒ¼**                  | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯ã‚’ç®¡ç†ã™ã‚‹ã‚µãƒ¼ãƒãƒ¼                   |
| **ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆ=ã‚¢ãƒ—ãƒªï¼‰**       | ãƒªã‚½ãƒ¼ã‚¹ã‚ªãƒ¼ãƒŠãƒ¼èªå¯ã®ä¸‹ã€ãƒªã‚½ãƒ¼ã‚¹ã‚’è¦æ±‚ã™ã‚‹ã‚¢ãƒ—ãƒª         |

ä¸Šè¨˜ã«åŠ ãˆã€ã‚‚ã†ä¸€ã¤ã€Œ[**ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³**](https://openid-foundation-japan.github.io/rfc6749.ja.html#anchor8)ã€ã¨ã„ã†é‡è¦ãªã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚
ã“ã‚Œã¯ã€Œ**èªå¯ã‚µãƒ¼ãƒãƒ¼ãŒã‚¢ãƒ—ãƒªã«ç™ºè¡Œã™ã‚‹ä¸€æ™‚çš„ãªéµ**ã€ã®ã‚ˆã†ãªã‚‚ã®ã§ã€ã‚¢ãƒ—ãƒªã¯ã“ã‚Œã‚’åˆ©ç”¨ã—ã¦ãƒªã‚½ãƒ¼ã‚¹ã‚µãƒ¼ãƒãƒ¼ä¸Šã®ä¿è­·ã•ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹ã«å®‰å…¨ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã®ã§ã™ã€‚

### OAuth ã®ãƒ•ãƒ­ãƒ¼ã«ã¤ã„ã¦

æ¬¡ã«ã€OAuth ã®æ§‹æˆè¦ç´ ãŒã©ã®ã‚ˆã†ãªå½¹å‰²ã‚’æœãŸã—ã¦ã„ã‚‹ã‹ã€å®Ÿéš›ã®ãƒ•ãƒ­ãƒ¼ã‚’è¦‹ã¦ã„ãã¾ã™ã€‚
[OAuth ã®ãƒ•ãƒ­ãƒ¼ã¯è¤‡æ•°ã‚ã‚Šã¾ã™](https://qiita.com/TakahikoKawasaki/items/200951e5b5929f840a1f#1-%E8%AA%8D%E5%8F%AF%E3%82%B3%E3%83%BC%E3%83%89%E3%83%95%E3%83%AD%E3%83%BC)ãŒã€ä»Šå›ã¯æ¨™æº–çš„ãªãƒ•ãƒ­ãƒ¼ã§ã‚ã‚‹ã€Œ**èªå¯ã‚³ãƒ¼ãƒ‰ãƒ•ãƒ­ãƒ¼ï¼ˆAuthorization Code Flowï¼‰**ã€ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

ä»¥ä¸‹ã® 4 ã‚¹ãƒ†ãƒƒãƒ—ã§è¡Œã‚ã‚Œã¾ã™ã€‚

1. **ã‚¢ãƒ—ãƒªãŒèªå¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡**

   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ãƒ—ãƒªã‚’ä½¿ã£ã¦å¤–éƒ¨ãƒªã‚½ãƒ¼ã‚¹ã¸ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã«ã€
     ã‚¢ãƒ—ãƒªã¯èªå¯ã‚µãƒ¼ãƒãƒ¼ã«å¯¾ã—ã¦ã€ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯ã‚’ã‚‚ã‚‰ã†ãŸã‚ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¾ã™ã€‚

2. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ã‚¯ã‚»ã‚¹è¨±å¯ã‚’æ‰¿èª**

   - èªå¯ã‚µãƒ¼ãƒãƒ¼ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¯¾ã—ã¦ã‚¢ãƒ—ãƒªã¸ã®ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯ã‚’è¦æ±‚ã—ã¾ã™ã€‚
     ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã“ã‚Œã‚’æ‰¿èªã™ã‚‹ã¨ã€èªå¯ã‚µãƒ¼ãƒãƒ¼ã¯ã€Œèªè¨¼ã‚³ãƒ¼ãƒ‰ã€ã‚’ã‚¢ãƒ—ãƒªã«é€ä¿¡ã—ã¾ã™ã€‚

3. **ã‚¢ãƒ—ãƒªãŒã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—**

   - ã‚¢ãƒ—ãƒªã¯èªè¨¼ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ã£ã¦ã€èªå¯ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚

4. **ãƒªã‚½ãƒ¼ã‚¹ã‚µãƒ¼ãƒãƒ¼ã¸ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡**
   - ã‚¢ãƒ—ãƒªã¯ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ã£ã¦ãƒªã‚½ãƒ¼ã‚¹ã‚µãƒ¼ãƒãƒ¼ã« API ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã€å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã™ã€‚

ãƒ•ãƒ­ãƒ¼ã‚’å›³ç¤ºã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```mermaid
sequenceDiagram
    participant User as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant App as ã‚¢ãƒ—ãƒª
    participant OServer as èªå¯ã‚µãƒ¼ãƒãƒ¼
    participant RServer as ãƒªã‚½ãƒ¼ã‚¹ã‚µãƒ¼ãƒãƒ¼

    User->>App: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚½ãƒ¼ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã„
    App->>OServer: èªå¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡
    OServer->>User: ã‚¢ãƒ—ãƒªã¸ã®ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯ã‚’ç¢ºèª
    User->>OServer: ã‚¢ãƒ—ãƒªã¸ã®ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯ã‚’æ‰¿èª
    OServer->>App: èªè¨¼ã‚³ãƒ¼ãƒ‰ã‚’é€ä¿¡
    App->>OServer: èªè¨¼ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ã£ã¦ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
    OServer->>OServer: ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ç”Ÿæˆ
    OServer->>App: ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ç™ºè¡Œ
    App->>RServer: APIãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³æ·»ä»˜ï¼‰
    RServer->>RServer: ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼
    RServer->>App: ãƒªã‚¯ã‚¨ã‚¹ãƒˆã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™

```

https://openid-foundation-japan.github.io/rfc6749.ja.html

### GitHub ãƒ­ã‚°ã‚¤ãƒ³ã¨ OAuth ã®é–¢ä¿‚

ã“ã“ã¾ã§ã§ OAuth ã®ãƒ•ãƒ­ãƒ¼ãŒãªã‚“ã¨ãªãç†è§£ã§ããŸã‹ã¨æ€ã„ã¾ã™ã€‚
ã§ã¯ **GitHub ãƒ­ã‚°ã‚¤ãƒ³**ã‚’ä¾‹ã«ã€ã“ã‚Œã« OAuth ãŒã©ã®ã‚ˆã†ã«é–¢ã‚ã£ã¦ã„ã‚‹ã‹ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

ãŸã ãã®å‰ã«ã€ã“ã†ç–‘å•ã«æ€ã£ãŸæ–¹ãŒã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

> **ãã†ã„ãˆã° OAuth ã£ã¦ã€èªå¯ã€ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã ã‚ˆã­ï¼Ÿï¼ŸGitHub ãƒ­ã‚°ã‚¤ãƒ³ã£ã¦èãã¨ã€
> ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒèª°ã‹ã‚’ç¢ºèªã™ã‚‹ã‚¹ãƒ†ãƒƒãƒ—ã ã‹ã‚‰ã€ã©ã¡ã‚‰ã‹ã¨ã„ã†ã¨ã€èªè¨¼ã€ãªã®ã§ã¯ï¼Ÿï¼Ÿ**

[ã“ã¡ã‚‰ã®æ–¹ã®è¨˜äº‹](https://zenn.dev/takamin55/articles/538711ed6fd48d#%E5%BE%85%E3%81%A6%E3%80%82oauth%E3%81%A3%E3%81%A6%E3%83%AD%E3%82%B0%E3%82%A4%E3%83%B3%E3%81%AE%E6%89%8B%E6%AE%B5%E3%81%A7%E3%81%AF%EF%BC%9F%E3%81%A4%E3%81%BE%E3%82%8A%E8%AA%8D%E8%A8%BC%E3%81%A7%E3%81%AF%EF%BC%9F)ã§ã‚‚åŒæ§˜ãªã“ã¨ãŒè¨€åŠã•ã‚Œã¦ã„ã¾ã™ãŒã€GitHub ãƒ­ã‚°ã‚¤ãƒ³ã®ã©ã“ã«
OAuth ã®èªå¯ãƒ•ãƒ­ãƒ¼ãŒå–ã‚Šå…¥ã‚Œã‚‰ã‚Œã¦ã„ã‚‹ã®ã‹ã€è‡ªåˆ†ã¯æœ€åˆã‚¤ãƒ¡ãƒ¼ã‚¸ãŒã§ãã¾ã›ã‚“ã§ã—ãŸã€‚

ã“ã‚Œã‚’ç†è§£ã™ã‚‹ãŸã‚ã«ã€OAuth ã‚’æ§‹æˆã™ã‚‹ 4 ã¤ã®è¦ç´ ã«ã€å®Ÿéš›ã®ç™»å ´äººç‰©ã‚’å½“ã¦ã¯ã‚ã¦ã¿ã¾ã™ã€‚

| è¦ç´                         | GitHub ãƒ­ã‚°ã‚¤ãƒ³ã«ãŠã‘ã‚‹ç™»å ´äººç‰©                            |
| --------------------------- | ---------------------------------------------------------- |
| **ãƒªã‚½ãƒ¼ã‚¹ã‚ªãƒ¼ãƒŠãƒ¼**        | GitHub ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’æ‰€æœ‰ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼                        |
| **ãƒªã‚½ãƒ¼ã‚¹ã‚µãƒ¼ãƒãƒ¼**        | GitHubï¼ˆ=GitHub ã®ãƒªã‚½ãƒ¼ã‚¹å–å¾—ã™ã‚‹ APIï¼‰                   |
| **èªå¯ã‚µãƒ¼ãƒãƒ¼**            | GitHubï¼ˆ=GitHub ã®èªå¯ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼‰                     |
| **ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆ=ã‚¢ãƒ—ãƒªï¼‰** | Twitter ã‚¯ãƒ­ãƒ¼ãƒ³ã‚¢ãƒ—ãƒªï¼ˆâ€»GitHub ãƒ­ã‚°ã‚¤ãƒ³ã‚’å®Ÿè£…ã™ã‚‹ã‚¢ãƒ—ãƒªï¼‰ |

ç‰¹å¾´çš„ãªã®ã¯ã€**GitHub ãŒèªå¯ã‚µãƒ¼ãƒãƒ¼ã¨ãƒªã‚½ãƒ¼ã‚¹ã‚µãƒ¼ãƒãƒ¼ã®ä¸¡æ–¹ã®å½¹å‰²ã‚’æ‹…ã£ã¦ã„ã‚‹**ã“ã¨ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¢ãƒ—ãƒªã¯èªå¯ãƒ•ãƒ­ãƒ¼ã‚’é€šã˜ã¦å–å¾—ã—ãŸã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã§ã€GitHub API ã‹ã‚‰ç›´æ¥ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—ã§ãã¾ã™ã€‚ãã®ãŸã‚ã€ã‚¢ãƒ—ãƒªå´ã§èªè¨¼å‡¦ç†ã‚’æŒŸã¾ãªãã¦ã‚‚ã€å–å¾—ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’ã‚‚ã¨ã«ãƒ­ã‚°ã‚¤ãƒ³ï¼ˆèªè¨¼ï¼‰ã§ãã‚‹ã®ã§ã™ã€‚

ã¤ã¾ã‚Šã€**GitHub ãƒ­ã‚°ã‚¤ãƒ³ã¯ OAuth ã®ã€Œèªå¯ã€ãƒ•ãƒ­ãƒ¼ã‚’çµŒç”±ã—ã¦ã€çµæœçš„ã«ã€Œèªè¨¼ã€ã‚’å®Ÿç¾ã—ã¦ã„ã‚‹**ã®ã§ã™ã€‚ãã‚Œã‚’è¸ã¾ãˆã‚‹ã¨ã€å…ˆç¨‹ã®ç–‘å•ã‚‚è§£æ±ºã™ã‚‹ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ
GitHub ãƒ­ã‚°ã‚¤ãƒ³ã¯ã€Œèªå¯ã€ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’é€šã£ã¦ã„ã‚‹ã®ã§ã™ã€‚

ä»¥ä¸‹ã¯ GitHub ãƒ­ã‚°ã‚¤ãƒ³ã®ãƒ•ãƒ­ãƒ¼å›³ã§ã™ã€‚

```mermaid
sequenceDiagram
    participant User as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant App as ã‚¢ãƒ—ãƒª
    participant GitHub as GitHub

    User->>App: ã€ŒGitHubã§ãƒ­ã‚°ã‚¤ãƒ³ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
    App->>GitHub: èªå¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡
    GitHub->>User: ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã‚’è¡¨ç¤ºã—ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒªã‚½ãƒ¼ã‚¹ã‚ªãƒ¼ãƒŠãƒ¼ã‹ç¢ºèª
    User->>GitHub: ãƒ¦ãƒ¼ã‚¶ãƒ¼åãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ãƒ­ã‚°ã‚¤ãƒ³
    GitHub->>User: ã‚¢ãƒ—ãƒªã¸ã®ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯ã‚’ç¢ºèª
    User->>GitHub: ã‚¢ãƒ—ãƒªã¸ã®ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯ã‚’æ‰¿èª
    GitHub->>App: èªè¨¼ã‚³ãƒ¼ãƒ‰ã‚’é€ä¿¡
    App->>GitHub: èªè¨¼ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ã£ã¦ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
    GitHub->>GitHub: ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ç”Ÿæˆ
    GitHub->>App: ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’é€ä¿¡
    App->>GitHub: APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ï¼ˆã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³æ·»ä»˜ï¼‰
    GitHub->>GitHub: ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼
    GitHub->>App: ãƒªã‚¯ã‚¨ã‚¹ãƒˆã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™
    App->>App: å–å¾—ã—ãŸGitHubã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã§èªè¨¼å‡¦ç†ã‚’å®Ÿè¡Œï¼ˆã‚¢ãƒ—ãƒªã«ãƒ­ã‚°ã‚¤ãƒ³ï¼‰
```

## ãŠã‚ã‚Šã«

æœ¬è¨˜äº‹ã§ã¯ã€OAuth ã®ä»•çµ„ã¿ã¨ ãã‚ŒãŒ GitHub ãƒ­ã‚°ã‚¤ãƒ³ã«ã©ã®ã‚ˆã†ã«é–¢ä¿‚ã—ã¦ã„ã‚‹ã‹ã‚’ã€
èª¬æ˜ã—ã¾ã—ãŸã€‚OAuth è‡ªä½“ç†è§£ã—ã‚ˆã†ã¨ã™ã‚‹ã¨å¥¥ãŒæ·±ã„æŠ€è¡“ã§ã™ãŒã€å…¨ä½“åƒã ã‘ã§ã‚‚ç†è§£ã§ãã‚Œã°ã€ä»Šå¾Œã®é–‹ç™ºã§èªå¯ã‚’å¿…è¦ã¨ã™ã‚‹ã‚’å®Ÿè£…ã§æ´»ã‹ã›ã‚‹å ´é¢ãŒã‚ã‚‹ã¨æ„Ÿã˜ã¾ã—ãŸã€‚ä»Šå¾Œã‚‚ã„ã‚ã„ã‚èª¿ã¹ã¦è¦‹ãŸã„ã¨æ€ã„ã¾ã™ã€‚

æœ€å¾Œã¾ã§ã€èª­ã‚“ã§ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼

## å‚è€ƒã‚µã‚¤ãƒˆ

https://qiita.com/TakahikoKawasaki/items/e37caf50776e00e733be
https://envader.plus/article/294
https://docs.github.com/ja/enterprise-cloud%40latest/apps/creating-github-apps/writing-code-for-a-github-app/building-a-login-with-github-button-with-a-github-app
https://www.ibm.com/jp-ja/think/topics/oauth
https://openid-foundation-japan.github.io/rfc6749.ja.html#anchor2
